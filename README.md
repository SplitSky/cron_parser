Please don't use this code. It's really bad.

Use a library (if any of them are actually maintained). It's a requirement in the scheduler that I can't use a library.

It's painful. Bitmasks are clever but save yourself the pain. Go somewhere else
